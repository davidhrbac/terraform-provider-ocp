# ocp_virtual_host

Creates and manages a virtual host in OCP.

## Example Usage

```terraform
data "ocp_customer" "example" {
  name = "customer-a"
}

data "ocp_project" "example" {
  name        = "project-a"
  customer_id = data.ocp_customer.example.id
}

data "ocp_domain" "example" {
  customer_id = data.ocp_customer.example.id
  name        = "example.com"
}

data "ocp_network" "default" {
  name        = "net-a"
  customer_id = data.ocp_customer.example.id
}

data "ocp_template" "base" {
  name        = "ubuntu-22-04"
  customer_id = data.ocp_customer.example.id
  region      = "FINLAND"
}

data "ocp_tier" "bronze" {
  name = "Bronze"
}

data "ocp_data_protection_policy" "default" {
  customer_id = data.ocp_customer.example.id
  project_id  = data.ocp_project.example.id
  note        = "daily"
}

resource "ocp_virtual_host" "example" {
  region                 = "FINLAND"
  customer_id            = data.ocp_customer.example.id
  project_id             = data.ocp_project.example.id
  hostname               = "example-vm"
  domain_id              = data.ocp_domain.example.id
  cpu_count              = 4
  cores_per_socket       = 2
  memory_size_gb         = 16
  tier_id                = data.ocp_tier.bronze.id
  template_id            = data.ocp_template.base.id
  note                   = "managed-by-terraform"
  data_protection_policy = data.ocp_data_protection_policy.default.id

  interfaces {
    network_id     = data.ocp_network.default.id
    auto_assign_ip = true
  }
}
```

## Update Behavior

Sizing changes (CPU or memory) and tier changes must be applied in separate
Terraform runs.

## Import

```bash
terraform import ocp_virtual_host.example "<VirtualHost GlobalID>"
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cpu_count` (Number) Cpu count.
- `customer_id` (String) ID of the customer that owns the virtual host.
- `data_protection_policy` (String) Data protection policy.
- `domain_id` (String) ID of the domain.
- `hostname` (String) Hostname.
- `interfaces` (Block List, Min: 1) (see [below for nested schema](#nestedblock--interfaces))
- `memory_size_gb` (Number) Memory size gb.
- `note` (String) Note.
- `project_id` (String) ID of the project in which the virtual host is created.
- `region` (String) Region.
- `template_id` (String) ID of the template used to create the virtual host.
- `tier_id` (String) ID of the storage tier assigned to the virtual host.

### Optional

- `allow_resize_restart` (Boolean) Allow resize restart.
- `cores_per_socket` (Number) Cores per socket.

### Read-Only

- `id` (String) The ID of this resource.
- `status` (String) Status.
- `uuid` (String) Uuid.

<a id="nestedblock--interfaces"></a>
### Nested Schema for `interfaces`

Required:

- `network_id` (String) ID of the network for this interface.

Optional:

- `auto_assign_ip` (Boolean) Whether the IP should be assigned automatically.
- `ip` (String) IP address for this interface.



